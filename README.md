Это банковское приложение, предоставляющее REST API для управления пользователями, их счетами и переводами средств. Приложение включает аутентификацию через JWT, кэширование данных, периодическое начисление процентов на счета и потокобезопасные операции перевода денег.
Технологии

    Java 11+

    Spring Boot (Web, Data JPA, Security)

    PostgreSQL - основная база данных

    Redis - для кэширования и блокировок при транзакциях

    JWT - для аутентификации

    Swagger - документация API

    Lombok - сокращение boilerplate кода

    Hibernate Validator - валидация данных

    JUnit 5 + Mockito - тестирование

Запуск проекта
Требования

    Установленные Java 11+, Docker, Maven

    Запущенный Docker (для Redis и PostgreSQL)

1. Запуск инфраструктуры
bash

docker-compose up -d

Это запустит:

    PostgreSQL на порту 5432

    Redis на порту 6379

2. Настройка базы данных

Создайте базу данных banking в PostgreSQL.
3. Запуск приложения
bash

mvn spring-boot:run

Приложение будет доступно на http://localhost:8080
4. Документация API

После запуска откройте Swagger UI:

http://localhost:8080/swagger-ui.html

Архитектурные решения
1. Безопасность транзакций

Для защиты от race condition при переводах денег реализован механизм блокировок через Redis:

    Перед переводом устанавливается блокировка на ключ transfer:{fromUserId}:{toUserId}

    Блокировка автоматически снимается через 30 секунд

    Если блокировка уже установлена - транзакция отклоняется

2. Кэширование

Используется двухуровневое кэширование:

    Кэш Spring на уровне сервиса (@Cacheable в UserService)

    Redis как распределенный кэш (CacheManager)

3. Начисление процентов

Проценты начисляются раз в 30 секунд с ограничением:

    Баланс не может превысить 207% от начального депозита

    Реализовано через @Scheduled метод в AccountService

4. Валидация данных

    Пользовательские данные валидируются через Hibernate Validator

    Специальные аннотации для проверки форматов:

        @Pattern для даты рождения (DD.MM.YYYY)

        @Size для паролей (8-500 символов)

        Кастомные проверки уникальности email и телефона

API Endpoints
Аутентификация

    POST /api/auth/login - получение JWT токена

Пользователи

    GET /api/users/{id} - получение пользователя по ID

    PUT /api/users/{id} - обновление данных пользователя

    GET /api/users/search - поиск пользователей с фильтрами

Счета

    POST /api/accounts/transfer - перевод денег между счетами

Тестирование

Запуск тестов:
bash

mvn test

Тесты покрывают:

    Бизнес-логику переводов денег

    Валидацию данных

    Фильтрацию пользователей

    Безопасность (проверка доступа)

Логирование

Настроено логирование:

    Запросов/ответов API

    Ошибок валидации

    Транзакционных операций

    Ошибок безопасности
